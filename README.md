# R9Turn - 回合制框架

## 简介

原型开发，以信号系统和响应式模型为基础框架，利用 `pydantic` 验证加载导出数据，分离游戏实体属性与实体管理，提供强大的效果系统和灵活的开发潜力。

## 使用例

`GameSys` 类已玩完善对攻击、恢复和特殊状态基本流程。

例，若希望监控攻击行为，

1. 由 `DamageCollect` 收集伤害前的预处理行为，如攻击、防御的调整；
  
2. 由 `PreDamage` 收集伤害变动，此阶段可发生增伤、减伤和伤害限制等的修改；
  
3. 由 `Damage` 信号最终引发确定伤害事件，广播实际伤害；
  
4. 游戏系统添加对 `attributs.characters.hp` 一次性持久化响应式修改。
  

例，若希望加入回合效果，可直接对角色、玩家的属性响应式修改，如三回合内攻击提升、下降，对 `attributs.characters.hp` 添加一个信号槽 `Slot` ，槽本身即具有一定生命周期管理能力，在三回合结束后自动释放。若希望该效果被捕捉，可注册 `Status` 类，添加动态标签，尽管动态特性的引入造成了调试的复杂，但可在状态复杂不统一场景下提供灵活处理的选项。

例，模拟时 `simulate` 返回战败方索引，特别的，若指定先手方为 $0$ 号位玩家，`simulate` 返回值的均值表示先手方胜率。

## 其他

可用 `server.py` 进行游戏进程的远程交互，使用 websockets 协议，默认端口 `1999`.

开发急促，后续将补全完善统一命名、接口和其他数据约定。
